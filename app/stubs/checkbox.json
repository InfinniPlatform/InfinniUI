{
  "DataSources": [
    {
      "ObjectDataSource": {
        "Name": "MainDataSource"
      }
    },
    {
      "ObjectDataSource": {
        "Name": "BloodGroupDataSource",
        "Items": [
          {
            "Id": 1,
            "DisplayName": "I",
            "SomeField": ""
          },
          {
            "Id": 2,
            "DisplayName": "II",
            "SomeField": "val"
          },
          {
            "Id": 3,
            "DisplayName": "III",
            "SomeField": 3
          },
          {
            "Id": 4,
            "DisplayName": "IV",
            "SomeField": null
          }
        ]
      }
    },
    {
      "ObjectDataSource": {
        "Name": "PatientDataSource",
         "Items": [
             {
                 "Id": 1,
                 "Diseases": [
                     {
                         "Name": "allergosis"
                     },
                     {
                         "Name": "dermatomycosis"
                     },
                     {
                         "Name": "cold"
                     }
                 ]
             }
         ]
      }
    }
  ],
  "Items": [{
    "TablePanel": {
      "Name": "",
      "Items": [
          {
              "Row": {
                  "Items": [
                      {
                          "Cell": {
                              "ColumnSpan": 3,
                              "Items": [{
                                  "ToggleButton": {
                                      "Text": "Subscribe",
                                      "TextOn": "yes",
                                      "TextOff": "no",
                                      "OnValueChanged": {
                                          "Name": "ToggleButtonOnValueChanged"
                                      },
                                      "OnValueChanging": {
                                          "Name": "ToggleButtonOnValueChanging"
                                      }
                                  }
                              }]
                          }
                      },
                      {
                          "Cell": {
                              "ColumnSpan": 3,
                              "Items": [{
                                  "TextBox": {
                                      "Multiline": false,
                                      "LineCount": 5,
                                      "HintText": "I'm TextBox hint",
                                      "LabelText": "Text label",
                                      "Enabled": true,
                                      "EditMask": {
                                          "NumberEditMask": {
                                              "Mask": "n3"
                                          }
                                      },
                                      "Value": {
                                          "PropertyBinding": {
                                              "Source": "MainDataSource",
                                              "Property": "$"
                                          }
                                      }
                                  }
                              }]
                          }
                      },
                      {
                          "Cell": {
                              "ColumnSpan": 3,
                              "Items": [{
                                  "DatePicker": {
                                    "Mode": "Date",
                                    "DisplayFormat": {
                                      "DateTimeFormat": {
                                        "Format": "d"
                                      }
                                    },
                                    "MinValue": "2015-9-14",
                                    "MaxValue": "2015-10-20",
                                    "EditMask": {
                                      "DateTimeEditMask": {
                                        "Mask": "d"
                                      }
                                    },
                                    "Value": {
                                      "PropertyBinding": {
                                        "Source": "MainDataSource",
                                        "Property": "birthday"
                                      }
                                    }
                                  }
                               }]
                          }
                      }
                  ]
              }
          },
        {
          "NumericBox": {
            "HintText": "I'm NumericBox hint",
            "LabelText": "Numeric label",
            "Enabled": true,
            "MinValue": 0,
            "EditMask": {
              "NumberEditMask": {
                "Mask": "n3"
              }
            },
            "Value": {
              "PropertyBinding": {
                "Source": "MainDataSource",
                "Property": "$"
              }
            }
          }
        },
        {
          "DatePicker": {
            "Mode": "DateTime",
            "DisplayFormat": {
              "DateTimeFormat": {
                "Format": "g"
              }
            },
            "MinValue": "2015-09-03",
            "EditMask": {
              "DateTimeEditMask": {
                "Mask": "g"
              }
            },
            "Value": {
              "PropertyBinding": {
                "Source": "MainDataSource",
                "Property": "birthday"
              }
            }
          }
        },
        {
          "DatePicker": {
            "Mode": "Time",
            "DisplayFormat": {
              "DateTimeFormat": {
                "Format": "t"
              }
            },
            "Enabled": false,
            "MinValue": "2015-09-15T09:00",
            "MaxValue": "2015-09-15T18:30",
            "EditMask": {
              "DateTimeEditMask": {
                "Mask": "t"
              }
            },
            "Value": {
              "PropertyBinding": {
                "Source": "MainDataSource",
                "Property": "birthday"
              }
            }
          }
        },
        {
          "Button": {
            "Text": "Open View",
            "Action":{
                 "OpenAction": {
                     "View": {
                         "InlineView": {
                             "View": {
                                 "Scripts": [{
                                     "Name": "close",
                                     "Body": "context.view.close();"
                                 }],
                                 "Items": [
                                     {
                                         "Button": {
                                             "Text": "Close",
                                             "OnClick": "close"
                                         }
                                     }
                                 ]
                             },
                             "OpenMode": "Dialog",
                             "Text": "OpenDialog"
                         }

                     }
                 }
             }
          }
        },
        {
            "ListBox":{
                "Name": "PatientListBox",
                "ItemTemplate": {
                    "StackPanel":{
                        "Orientation": "Horizontal",
                        "Items": [
                            {
                                "Label": {
                                    "Value": {
                                        "PropertyBinding": {
                                            "Source": "PatientDataSource",
                                            "Property": "Diseases.$.Name"
                                        }
                                    }
                                }
                            },
                            {
                                "Button": {
                                    "Text": "Delete",
                                    "Action": {
                                        "DeleteItemAction": {
                                            "Items": {
                                                "DataBinding": {
                                                    "Source": "PatientDataSource",
                                                    "Property": "Diseases"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        ]
                    }

                },
                "Items": {
                    "PropertyBinding": {
                        "Source": "PatientDataSource",
                        "Property": "Diseases"
                    }
                }
            }
        },
        {
          "PopupButton": {
            "Text": "Delete",
            "Items": [
              {
                "Button": {
                  "Text": "Delete rows"
                }
              },
              {
                "Button": {
                  "Text": "Delete columns"
                }
              },
              {
                "Button": {
                  "Text": "Delete cells"
                }
              }
            ]
          }
        }
      ]
    }
  }, {
    "ListBox": {
      "ViewMode": "common",

      "MultiSelect": true,

      "Items": {
        "PropertyBinding":{
          "Source": "BloodGroupDataSource",
          "Property": ""
        }
      },

      "ItemTemplate":{
        "StackPanel": {
          "Items":[
            {
              "Label":{
                "Background": "Primary1",
                "Value":{
                  "PropertyBinding": {
                    "Source": "BloodGroupDataSource",
                    "Property": "$.DisplayName"
                  }
                }
              }
            },
            {
              "Label":{
                "Value":{
                  "PropertyBinding": {
                    "Source": "BloodGroupDataSource",
                    "Property": "$.Id"
                  }
                },
                "Visible": {
                  "PropertyBinding": {
                    "Source": "BloodGroupDataSource",
                    "Property": "$.SomeField"
                  }
                }
              }
            }
          ]
        }
      }
    }
  }, {
    "GridPanel":{
      "Items": [{
        "Cell": {
          "ColumnSpan": 9,
          "Items": [{
            "ToggleButton": {
              "Text": "Subscribe",
              "TextOn": "yes",
              "TextOff": "no",
              "OnValueChanged": {
                "Name": "ToggleButtonOnValueChanged"
              },
              "OnValueChanging": {
                "Name": "ToggleButtonOnValueChanging"
              }
            }
          }]
        }
      },{
        "Cell": {
          "ColumnSpan": 9,
          "Items": [{
            "ToggleButton": {
              "Text": "Subscribe",
              "TextOn": "",
              "TextOff": "",
              "OnValueChanged": {
                "Name": "ToggleButtonOnValueChanged"
              },
              "OnValueChanging": {
                "Name": "ToggleButtonOnValueChanging"
              }
            }
          }]
        }
      }]
    }
  }],
  "Scripts": [
    {
      "Name": "OnValueChanged",
      "Body": "console.log('OnValueChanged', args);"
    },
    {
      "Name": "ToggleButtonOnValueChanged",
      "Body": "console.log('ToggleButtonOnValueChanged', args.value);"
    },
    {
      "Name": "ToggleButtonOnValueChanging",
      "Body": "return args.value;"
    },

    {
      "Name": "OnValueChanging",
      "Body": "console.log('OnValueChanging', args);return false;"
    },
    {
      "Name": "ValueSelector",
      "Body": "return {Id: args.value.DisplayName};"
    },
    {
      "Name": "ItemSelector",
      "Body": "var value = args.value; return value.Id + '/' + value.DisplayName;"
    },
    {
      "Name": "GroupValueSelector",
      "Body": "return args.value.Id;"
    }
  ]
}

