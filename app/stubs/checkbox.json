{
  "DataSources": [
    {
      "ObjectDataSource": {
        "Name": "MainDataSource"
      }
    },
    {
      "ObjectDataSource": {
        "Name": "BloodGroupDataSource",
        "Items": [
          {
            "Id": 1,
            "DisplayName": "I",
            "SomeField": ""
          },
          {
            "Id": 2,
            "DisplayName": "II",
            "SomeField": "val"
          },
          {
            "Id": 3,
            "DisplayName": "III",
            "SomeField": 3
          },
          {
            "Id": 4,
            "DisplayName": "IV",
            "SomeField": null
          }
        ]
      }
    },
    {
      "ObjectDataSource": {
        "Name": "PatientDataSource",
        "Items": [
           {
              "Id": 1,
              "Diseases": [
                  {
                      "Name": "allergosis"
                  },
                  {
                      "Name": "dermatomycosis"
                  },
                  {
                      "Name": "cold"
                  }
              ]
           }
        ]
      }
    }
  ],
  "Items": [{
    "MenuBar": {
      "Items": [
        {
            "PopupButton": {
            "Text": "Delete",
            "Items": [
              {
                "Button": {
                  "Text": "Delete rows"
                }
              },
              {
                "Button": {
                  "Text": "Delete columns"
                }
              },
              {
                "Button": {
                  "Text": "Delete cells"
                }
              }
            ],
            "HorizontalAlignment": "Right"
          }
        },{
          "Button": {
            "ContentTemplate": {
              "Icon": {
                "Value": "anchor"
              }
            },
            "HorizontalAlignment": "Right"
          }
        }
      ]
    }

  },{
    "TablePanel": {
      "Name": "",
      "Items": [
          {
              "Row": {
                  "Items": [
                      {
                          "Cell": {
                              "ColumnSpan": 3,
                              "Items": [{
                                  "ToggleButton": {
                                      "Text": "Subscribe",
                                      "TextOn": "yes",
                                      "TextOff": "no",
                                      "OnValueChanged": {
                                          "Name": "ToggleButtonOnValueChanged"
                                      },
                                      "OnValueChanging": {
                                          "Name": "ToggleButtonOnValueChanging"
                                      }
                                  }
                              }]
                          }
                      },
                      {
                          "Cell": {
                              "ColumnSpan": 3,
                              "Items": [{
                                  "TextBox": {
                                      "Multiline": false,
                                      "LineCount": 5,
                                      "HintText": "I'm TextBox hint",
                                      "LabelText": "Text label",
                                      "Enabled": true,
                                      "EditMask": {
                                          "NumberEditMask": {
                                              "Mask": "n3"
                                          }
                                      },
                                      "Value": {
                                          "PropertyBinding": {
                                              "Source": "MainDataSource",
                                              "Property": "$"
                                          }
                                      }
                                  }
                              }]
                          }
                      },
                      {
                          "Cell": {
                              "ColumnSpan": 3,
                              "Items": [{
                                  "DatePicker": {
                                    "Mode": "Date",
                                    "DisplayFormat": {
                                      "DateTimeFormat": {
                                        "Format": "d"
                                      }
                                    },
                                    "MinValue": "2015-9-14",
                                    "MaxValue": "2015-10-20",
                                    "EditMask": {
                                      "DateTimeEditMask": {
                                        "Mask": "d"
                                      }
                                    },
                                    "Value": {
                                      "PropertyBinding": {
                                        "Source": "MainDataSource",
                                        "Property": "birthday"
                                      }
                                    }
                                  }
                               }]
                          }
                      }
                  ]
              }
          },
        {
          "NumericBox": {
            "HintText": "I'm NumericBox hint",
            "LabelText": "Numeric label",
            "Enabled": true,
            "MinValue": 0,
            "EditMask": {
              "NumberEditMask": {
                "Mask": "n3"
              }
            },
            "Value": {
              "PropertyBinding": {
                "Source": "MainDataSource",
                "Property": "$"
              }
            }
          }
        },
        {
          "DatePicker": {
            "Mode": "DateTime",
            "DisplayFormat": {
              "DateTimeFormat": {
                "Format": "g"
              }
            },
            "MinValue": "2015-09-03",
            "EditMask": {
              "DateTimeEditMask": {
                "Mask": "g"
              }
            },
            "Value": {
              "PropertyBinding": {
                "Source": "MainDataSource",
                "Property": "birthday"
              }
            }
          }
        },
        {
          "DatePicker": {
            "Mode": "Time",
            "DisplayFormat": {
              "DateTimeFormat": {
                "Format": "t"
              }
            },
            "Enabled": false,
            "MinValue": "2015-09-15T09:00",
            "MaxValue": "2015-09-15T18:30",
            "EditMask": {
              "DateTimeEditMask": {
                "Mask": "t"
              }
            },
            "Value": {
              "PropertyBinding": {
                "Source": "MainDataSource",
                "Property": "birthday"
              }
            }
          }
        },
          {
              "Button": {
                  "Text": "Open View",
                  "Action":{
                      "OpenAction": {
                          "LinkView": {
                              "InlineView": {
                                  "View": {
                                      "Scripts": [{
                                          "Name": "close",
                                          "Body": "context.view.close();"
                                      }],
                                      "Items": [
                                          {
                                              "Button": {
                                                  "Text": "Close",
                                                  "OnClick": "close"
                                              }
                                          }
                                      ]
                                  },
                                  "OpenMode": "Dialog",
                                  "Text": "OpenDialog"
                              }

                          }
                      }
                  }
              }
          },
          {
              "Button": {
                  "Text": "Add Disease",
                  "Action": {
                      "AddAction": {
                          "LinkView":{
                              "InlineView": {
                                  "View": {
                                      "Items": [
                                          {
                                              "TextBox": {
                                                  "Value": {
                                                      "PropertyBinding": {
                                                          "Source": "MainDataSource",
                                                          "Property": "Name"
                                                      }
                                                  }
                                              }
                                          },
                                          {
                                              "Button": {
                                                  "Text": "Save",
                                                  "Action": {
                                                      "AcceptAction": {}
                                                  }
                                              }
                                          }
                                      ],
                                      "DataSources": [
                                          {
                                              "ObjectDataSource": {
                                                  "Name": "MainDataSource"
                                              }
                                          }
                                      ]
                                  },
                                  "Text": "OpenDialog",
                                  "OpenMode": "Dialog"
                              }
                          },
                          "DestinationValue": {
                              "Source": "PatientDataSource",
                              "Property": "Diseases"
                          },
                          "SourceValue": {
                              "Source": "MainDataSource"
                          }
                      }
                  }
              }
          },
          {
              "ListBox":{
                  "Name": "PatientListBox",
                  "ItemTemplate": {
                      "StackPanel":{
                          "Orientation": "Horizontal",
                          "Items": [
                              {
                                  "Label": {
                                      "Value": {
                                          "PropertyBinding": {
                                              "Source": "PatientDataSource",
                                              "Property": "Diseases.$.Name"
                                          }
                                      }
                                  }
                              },
                              {
                                  "Button": {
                                      "Text": "Edit",
                                      "Action": {
                                          "EditAction": {
                                              "LinkView":{
                                                  "InlineView": {
                                                      "View": {
                                                          "Items": [
                                                              {
                                                                  "TextBox": {
                                                                      "Value": {
                                                                          "PropertyBinding": {
                                                                              "Source": "MainDataSource",
                                                                              "Property": "Name"
                                                                          }
                                                                      }
                                                                  }
                                                              },
                                                              {
                                                                  "Button": {
                                                                      "Text": "Save",
                                                                      "Action": {
                                                                          "AcceptAction": {}
                                                                      }
                                                                  }
                                                              }
                                                          ],
                                                          "DataSources": [
                                                              {
                                                                  "ObjectDataSource": {
                                                                      "Name": "MainDataSource"
                                                                  }
                                                              }
                                                          ]
                                                      },
                                                      "OpenMode": "Dialog",
                                                      "Text": "OpenDialog"
                                                  }
                                              },
                                              "DestinationValue": {
                                                  "Source": "PatientDataSource",
                                                  "Property": "Diseases"
                                              },
                                              "SourceValue": {
                                                  "Source": "MainDataSource"
                                              }
                                          }
                                      }
                                  }
                              },
                              {
                                  "Button": {
                                      "Text": "Delete",
                                      "Action": {
                                          "DeleteItemAction": {
                                              "Items": {
                                                  "Source": "PatientDataSource",
                                                  "Property": "Diseases"
                                              }
                                          }
                                      }
                                  }
                              }
                          ]
                      }

                  },
                  "Items": {
                      "PropertyBinding": {
                          "Source": "PatientDataSource",
                          "Property": "Diseases"
                      }
                  }
              }
          },
        {
          "Button": {
            "ContentTemplate": {
              "Label":{
                "Name": "b1",
                "Value":{
                  "PropertyBinding": {
                    "Source": "BloodGroupDataSource",
                    "Property": "$.DisplayName"
                  }
                }
              }
            }
          }
        },

        {
          "PopupButton": {
            "Text": "Delete",
            "Items": [
              {
                "Button": {
                  "Text": "Delete rows"
                }
              },
              {
                "Button": {
                  "Text": "Delete columns"
                }
              },
              {
                "Button": {
                  "Text": "Delete cells"
                }
              }
            ]
          }
        }
      ]
    }
  }, {
    "ListBox": {
      "ViewMode": "common",

      "MultiSelect": true,

      "Items": {
        "PropertyBinding":{
          "Source": "BloodGroupDataSource",
          "Property": ""
        }
      },

      "ItemTemplate":{
        "StackPanel": {
          "Items":[
            {
              "Label":{
                "Background": "Primary1",
                "Value":{
                  "PropertyBinding": {
                    "Source": "BloodGroupDataSource",
                    "Property": "$.DisplayName"
                  }
                }
              }
            },
            {
              "Label":{
                "Value":{
                  "PropertyBinding": {
                    "Source": "BloodGroupDataSource",
                    "Property": "$.Id"
                  }
                },
                "Visible": {
                  "PropertyBinding": {
                    "Source": "BloodGroupDataSource",
                    "Property": "$.SomeField"
                  }
                }
              }
            }
          ]
        }
      }
    }
  }, {
    "GridPanel":{
      "Items": [{
        "Cell": {
          "ColumnSpan": 9,
          "Items": [{
            "ToggleButton": {
              "Text": "Subscribe",
              "TextOn": "yes",
              "TextOff": "no",
              "OnValueChanged": {
                "Name": "ToggleButtonOnValueChanged"
              },
              "OnValueChanging": {
                "Name": "ToggleButtonOnValueChanging"
              }
            }
          }]
        }
      },{
        "Cell": {
          "ColumnSpan": 9,
          "Items": [{
            "ExtensionPanel": {
              "ExtensionName":"Testt",
              "Parameters": [
                {
                  "Name": "p1",
                  "Value": {
                    "PropertyBinding": {
                      "Source": "BloodGroupDataSource",
                      "Property": ""
                    }
                  }
                }
              ],
              "Items": [{
                "NumericBox": {
                  "HintText": "I'm NumericBox hint",
                  "LabelText": "Numeric label",
                  "Enabled": true,
                  "MinValue": 0,
                  "EditMask": {
                    "NumberEditMask": {
                      "Mask": "n3"
                    }
                  },
                  "Value": {
                    "PropertyBinding": {
                      "Source": "MainDataSource",
                      "Property": "$"
                    }
                  }
                }
              }]
            }
          }]
        }
      },
        {
          "Cell": {
            "ColumnSpan": 9,
            "Items": [{
              "TabPanel": {
                "OnSelectedItemChanged": {
                  "Name": "OnSelectedItemChanged"
                },
                "HeaderLocation": "Left",
                "Items": [
                  {
                    "TabPage": {
                      "Text": "Header of Page1",
                      "Items": [
                        {
                          "Label": {
                            "Text": "Content of Page1"
                          }
                        }
                      ]
                    }
                  },
                  {
                    "TabPage": {
                      "Text": "Header of Page2",
                      "CanClose": true,
                      "OnClosing": {
                        "Name": "OnClosing"
                      },
                      "OnClosed": {
                        "Name": "OnClosed2"
                      },
                      "Items": [
                        {
                          "Label": {
                            "Text": "Content of Page2"
                          }
                        }
                      ]
                    }
                  },
                  {
                    "TabPage": {
                      "Text": "Header of Page3",
                      "CanClose": true,
                      "Items": [
                        {
                          "Label": {
                            "Text": "Content of Page3"
                          }
                        }
                      ]
                    }
                  }
                ]
              }
            }]
          }
        }]
    }
  }],
  "Scripts": [
    {
      "Name": "OnExpanded",
      "Body": "console.log('OnExpanded');"
    },
    {
      "Name": "OnCollapsed",
      "Body": "console.log('OnCollapsed');"
    },
    {
      "Name": "OnExpanding",
      "Body": "console.log('OnExpanding');"
    },
    {
      "Name": "OnCollapsing",
      "Body": "console.log('OnCollapsing');"
    },
    {
      "Name": "OnValueChanged",
      "Body": "console.log('OnValueChanged', args);"
    },
    {
      "Name": "ToggleButtonOnValueChanged",
      "Body": "console.log('ToggleButtonOnValueChanged', args.value);"
    },
    {
      "Name": "ToggleButtonOnValueChanging",
      "Body": "return args.value;"
    },

    {
      "Name": "OnValueChanging",
      "Body": "console.log('OnValueChanging', args);return false;"
    },
    {
      "Name": "ValueSelector",
      "Body": "return {Id: args.value.DisplayName};"
    },
    {
      "Name": "ItemSelector",
      "Body": "var value = args.value; return value.Id + '/' + value.DisplayName;"
    },
    {
      "Name": "GroupValueSelector",
      "Body": "return args.value.Id;"
    },
    {
      "Name": "OnClosing",
      "Body": "var defer = $.Deferred(); console.log('close TabPage after 3 sec');setTimeout(function () {defer.resolve('ok');}, 3000); return defer.promise();"
    },
    {
      "Name": "OnClosed2",
      "Body": "console.log('OnClosed2');"
    },
    {
      "Name": "OnSelectedItemChanged",
      "Body": "console.log('OnSelectedItemChanged');"
    }
  ]
}

