<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Tests for Parent Committee</title>

    <link href="style.css" rel="stylesheet" type="text/css"/>
	
    <script type="text/javascript" src="out/vendor.js"></script>
  	<script src="/bower_components/chai/chai.js"></script>

    <script type="text/javascript" src="config.js"></script>
	  <script type="text/javascript" src="out/app.js"></script>
    
    <script src="bower_components/elasticsearch/elasticsearch.js"></script>
    
    <script>
      var client = elasticsearch.Client({
        host: 'localhost:9200'
      });
    </script>
    
    <script>
    
      function runIntegrationTests(){
        var supportCode, 
          xhr = new XMLHttpRequest();
           
        xhr.open('GET', window.IntegrationTestConfig.featurePath, false);
        xhr.send();
        if(xhr.status != 200)
          return;
          
        var featureSource = '# language: ru\n' + xhr.responseText;
        
        xhr.open('GET', window.IntegrationTestConfig.stepDefinitionsPath, false);
        xhr.send();
        if(xhr.status != 200)
          return;
          
        eval('supportCode   = function() {' + xhr.responseText + '};'); 
        
         
        var listener = CucumberHTMLListener($('#test-result'));
        var cucumber = Cucumber(featureSource, supportCode);
        cucumber.attachListener(listener);
        
        try {
			
			cucumber.start(function() {});
          } catch(err) {
            console.log(err);
          $('#test-result').text(err.message);
        };
      };
    </script>
  </head>

  <body onload="runIntegrationTests()">  
	 <div id="test-result"></div>
  </body>
</html>
